<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Magic</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
        
        #container {
            width: 300px;
            height: 300px;
            margin: 100px auto;
            /* border: 1px solid #ccc; */
             perspective: 10000px;
        }
        
        #box {
            width: 300px;
            height: 300px;
            margin: 0 auto;
            position: relative;
            transform-style: preserve-3d;             
            animation: testanimations 10s linear infinite;
        }
        
        .box-page {
            width: 300px;
            height: 300px;
            margin: 0 auto;
            position: absolute;
            box-sizing: border-box;
            transform-style:preserve-3d;
        }
        
        .top {
            /*background-color: red;*/
            transform: translateZ(150px) rotateX(0deg);
        }
        
        .right {
            /*background-color: green;*/
            transform: translateX(-150px) rotateY(90deg);
        }
        
        .bottom {
            /*background-color: blue;*/
            transform: translateZ(-150px) rotateX(180deg);
        }
        
        .left {
            /*background-color: yellow;*/
            transform: translateX(150px) rotateY(-90deg);
        }
        
        .front {
            /*background-color: orange;*/
            transform: translateY(150px) rotateX(-90deg);
        }
        
        .back {
            /*background-color: purple;*/
            transform: translateY(-150px) rotateX(90deg);
        }
        
       
        
        .box-page div:nth-child(2),.box-page div:nth-child(4),.box-page div:nth-child(6),.box-page div:nth-child(8) {    
            transform: rotateX(0deg);
            animation: rotatex 6s linear infinite;
        }

        .box-page div:first-child,.box-page div:nth-child(3),.box-page div:nth-child(5),.box-page div:nth-child(7),.box-page div:nth-child(9) {
            transform: rotateY(0deg);
            animation: rotatey 6s linear infinite;
        }
              
         @keyframes testanimations {
            100% {
                transform: rotatex(360deg) rotatey(360deg) rotatez(360deg);
            }
        }
        
        @keyframes rotatex {
            20% {
                transform: rotateX(0deg);
                background-size: 300px 300px;
            }
            40% {
                transform: rotateX(540deg);
                background-size: 100px 100px;
            }
            60% {
                transform: rotateX(540deg);
                background-size: 100px 100px;
            }
            80% {
                transform: rotateX(0deg);
                background-size: 300px 300px;
            }
        }

        @keyframes rotatey {
            20% {
                transform: rotateY(0deg);
                background-size: 300px 300px;
            }
            40% {
                transform: rotateY(540deg);
                background-size: 100px 100px;
            }
            60% {
                transform: rotateY(540deg);
                background-size: 100px 100px;
            }
            80% {
                transform: rotateY(0deg);
                background-size: 300px 300px;
            }
        }
    </style>
</head>

<body>
    <div id="container">
        <div id="box">
            <div class="top box-page"></div>
            <div class="right box-page"></div>
            <div class="bottom box-page"></div>
            <div class="left box-page"></div>
            <div class="front box-page"></div>
            <div class="back box-page"></div>
        </div>
    </div>

    <script type="text/javascript">
        var arr = document.querySelectorAll("#box>div");
        console.log(arr.length);
        for (var k = 0; k < arr.length; ++k) {          

            //增加3*3小方格
            for (var r = 0; r < 3; ++r)
                for (var c = 0; c < 3; ++c) {
                    var div = document.createElement("div");  
                    arr[k].appendChild(div);

                    div.style.cssText = "width:100px;height:100px;position:absolute; border: 2px solid #fff; box-sizing: border-box;background-image: url(images/a" + k + ".jpg); background-size:300px 300px;";

                    //box position
                    div.style.left = c * 100 + "px";
                    div.style.top = r * 100 + "px";

                    //background shift
                    div.style.backgroundPositionX = - c * 100 + "px";
                    div.style.backgroundPositionY = - r * 100 + "px";      
                    
                }
        }
    </script>
</body>

</html>